!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("preact")):"function"==typeof define&&define.amd?define(["preact"],n):"object"==typeof exports?exports.MegaMenu=n(require("preact")):e.MegaMenu=n(e.preact)}(self,(e=>(()=>{"use strict";var n={935:n=>{n.exports=e}},t={};function o(e){var r=t[e];if(void 0!==r)return r.exports;var i=t[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var r={};o.d(r,{default:()=>v});var i=o(935);const a=function(e){var n=e.columns,t=e.isMobileView,o=e.parentId,r=e.featuredImage;return console.log("SubMenu - columns data:",n),console.log("SubMenu - Featured Image:",r),n&&n.length?(0,i.h)("div",{className:"submenu ".concat(t?"mobile":""),role:"region","aria-label":"Submenu for item ".concat(o)},r&&(0,i.h)("div",{className:"column featured-image-column"},(0,i.h)("div",{className:"featured-image"},(0,i.h)("img",{src:r,alt:"Featured image for submenu ".concat(o)}))),n.map((function(e,n){console.log("SubMenu - Column ".concat(n,":"),e);var t="horizontal"===e.style;return(0,i.h)("div",{key:n,className:"column"},e.title&&(0,i.h)("h4",{className:"column-title"},e.title),(0,i.h)("div",{className:"menus-container ".concat(t?"horizontal-container":"vertical-container")},e.menus&&e.menus.map((function(e){return(0,i.h)("ul",{key:e.id,className:"menu ".concat(t?"horizontal-menu":"vertical-menu"),role:"menu"},e.items&&e.items.map((function(e){return(0,i.h)("li",{key:e.id,role:"menuitem"},(0,i.h)("a",{href:e.url},e.title))})))}))))}))):null};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,d(o.key),o)}}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function m(e,n){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},m(e,n)}function f(e,n,t){return(n=d(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e){var n=function(e){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=u(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(n)?n:n+""}const p=function(e){function n(){var e;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return f(e=function(e,n,t){return n=s(n),function(e,n){if(n&&("object"==u(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(n,t||[],s(e).constructor):n.apply(e,t))}(this,n,[].concat(o)),"state",{activeMenu:null,isMobileView:!1,mobileMenuOpen:!1}),f(e,"checkMobileView",(function(){var n=window.innerWidth<=768;n!==e.state.isMobileView&&e.setState({isMobileView:n,mobileMenuOpen:!1,activeMenu:null})})),f(e,"handleKeyDown",(function(n){"Escape"===n.key&&null!==e.state.activeMenu&&(e.setState({activeMenu:null}),n.preventDefault())})),f(e,"handleMouseEnter",(function(n){e.state.isMobileView||e.setState({activeMenu:n})})),f(e,"handleMouseLeave",(function(){e.state.isMobileView||e.setState({activeMenu:null})})),f(e,"handleMenuLeave",(function(){e.state.isMobileView||e.setState({activeMenu:null})})),f(e,"handleMenuClick",(function(n,t){e.state.isMobileView&&e.props.data.subMenus[n]&&(t.preventDefault(),e.setState((function(e){return{activeMenu:e.activeMenu===n?null:n}})))})),f(e,"toggleMobileMenu",(function(){e.setState((function(e){return{mobileMenuOpen:!e.mobileMenuOpen,activeMenu:null}}))})),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&m(e,n)}(n,e),t=n,o=[{key:"componentDidMount",value:function(){this.checkMobileView(),window.addEventListener("resize",this.checkMobileView),document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.checkMobileView),document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this,n=this.props.data,t=this.state,o=t.activeMenu,r=t.isMobileView,u=t.mobileMenuOpen;return n&&n.topMenu&&n.topMenu.items?(0,i.h)("div",{className:"megamenu-container",onMouseLeave:this.handleMenuLeave},(0,i.h)("nav",{className:"megamenu","aria-label":"Main Navigation"},r&&(0,i.h)("button",{className:"mobile-menu-toggle ".concat(u?"active":""),onClick:this.toggleMobileMenu,"aria-expanded":u,"aria-label":"Toggle menu"},(0,i.h)("span",{className:"menu-icon"}),(0,i.h)("span",{className:"sr-only"},"Menu")),(0,i.h)("ul",{className:"top-menu ".concat(r&&u?"mobile-open":"")},n.topMenu.items.map((function(t){return(0,i.h)("li",{key:t.id,onMouseEnter:function(){return e.handleMouseEnter(t.id)},className:o===t.id?"active":""},(0,i.h)("a",{href:t.url,onClick:function(n){return e.handleMenuClick(t.id,n)},"aria-expanded":o===t.id,"aria-haspopup":n.subMenus[t.id]?"true":"false"},t.title,n.subMenus[t.id]&&r&&(0,i.h)("span",{className:"dropdown-indicator","aria-hidden":"true"})))})))),null!==o&&n.subMenus[o]&&(0,i.h)("div",{className:"submenu-wrapper"},console.log("MegaMenu - submenu data:",n.subMenus[o]),(0,i.h)(a,{columns:n.subMenus[o],isMobileView:r,parentId:o,featuredImage:n.submenuImages&&n.submenuImages[o]}))):null}}],o&&c(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,o}(i.Component);var b=function(){var e=document.getElementById("megamenu-container");e&&window.megamenuData&&(0,i.render)((0,i.h)(p,{data:window.megamenuData}),e)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",b):b();const v=p;return r.default})()));